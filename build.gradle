// Copyright by Barry G. Becker, 2013. Licensed under MIT License: http://www.opensource.org/licenses/MIT
plugins {
    id "com.github.maiflai.scalatest" version "0.14" // needed to run scala tests
}
description = 'A (mostly) java (migrating to scala) puzzle framework with generator and solver implementations ' +
        'for puzzles like Sudoku, Hi-Q, OneTough Puzzle, Tantrix, and others.'
group = 'com.barrybecker4'
version = '1.4-SNAPSHOT'
apply from: 'https://raw.github.com/barrybecker4/bb4-common/master/bb4.gradle'
apply plugin: 'scala'  // This can be moved into bb4.gradle


project.archivesBaseName = 'bb4-puzzle'
mainClassName = "com.barrybecker4.puzzle.maze.ui.MazeSimulator"

/** added scala directory layout. This can be moved to bb4.gradle. Consider changing to conventional src/main/... */
sourceSets {
    main {
        scala {
            srcDir 'scala-source'
        }
        resources {
            srcDir 'scala-source'
        }
    }
    test {
        scala {
            srcDir 'scala-test'
        }
    }
}

dependencies {
    compile 'com.barrybecker4:bb4-A-star:1.0' // scala lib
    compile 'com.barrybecker4:bb4-sound:1.4-SNAPSHOT'
    compile 'com.barrybecker4:bb4-optimization:1.4-SNAPSHOT'

    // scala dependencies
    compile('org.scala-lang:scala-library:2.12.1') { force = true }
    testCompile 'org.scalatest:scalatest_2.12:3.0.1'
    // Used to generate html unit test report
    testRuntime 'org.pegdown:pegdown:1.6.0'
}



task runAdventure(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.adventure.ui.GraphicalAdventure'
    classpath = sourceSets.main.runtimeClasspath
}

task runTextAdventure(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.adventure.TextAdventure'
    classpath = sourceSets.main.runtimeClasspath
    args = ['ludlow/ludlowScript.xml']
}

task runMaze(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.maze.ui.MazeSimulator'
    classpath = sourceSets.main.runtimeClasspath
}

task runMaze1(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.maze1.ui.MazeSimulator'
    classpath = sourceSets.main.runtimeClasspath
}

task runRedPuzzle(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.redpuzzle.ui.RedPuzzle'
    classpath = sourceSets.main.runtimeClasspath
}

task runRedPuzzle1(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.redpuzzle1.ui.RedPuzzle'
    classpath = sourceSets.main.runtimeClasspath
}

task runTantrixPuzzle(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.tantrix.ui.TantrixPuzzle'
    classpath = sourceSets.main.runtimeClasspath
    jvmArgs = ["-ea", "-Xms512M", "-Xmx4G"]
}

task runTantrixPuzzle1(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.tantrix1.ui.TantrixPuzzle'
    classpath = sourceSets.main.runtimeClasspath
    //args = ['-name', 'tantrix',  '-locale', 'ENGLISH']
    jvmArgs = ["-ea", "-Xms512M", "-Xmx4G"]
}

task runSudoku(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.sudoku.ui.SudokuPuzzle'
    classpath = sourceSets.main.runtimeClasspath
    jvmArgs = ["-ea"]
}

task runSudoku1(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.sudoku1.ui.SudokuPuzzle'
    classpath = sourceSets.main.runtimeClasspath
    jvmArgs = ["-ea"]
}

task runHiQ1(type: JavaExec) {   // remove this old java version
    group = 'application'
    main = 'com.barrybecker4.puzzle.hiq.ui.HiQPuzzle1'
    classpath = sourceSets.main.runtimeClasspath
    args = ['-locale', 'ENGLISH']
}

task runHiQ(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.hiq.ui.HiQPuzzle'
    classpath = sourceSets.main.runtimeClasspath
    args = ['-locale', 'ENGLISH']
}

task runSlidingPuzzle(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.slidingpuzzle.ui.SlidingPuzzle'
    classpath = sourceSets.main.runtimeClasspath
    jvmArgs = ["-Xss64m"]
}

task runSlidingPuzzle1(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.slidingpuzzle1.ui.SlidingPuzzle'
    classpath = sourceSets.main.runtimeClasspath
    jvmArgs = ["-Xss64m"]
}

task runTwoPailsPuzzle(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.twopails.ui.TwoPailsPuzzle'
    classpath = sourceSets.main.runtimeClasspath
    jvmArgs = ["-Xss64m"]
}


task runBridgePuzzle1(type: JavaExec) {  // This java version should be removed
    group = 'application'
    main = 'com.barrybecker4.puzzle.bridge.ui.BridgePuzzle1'
    classpath = sourceSets.main.runtimeClasspath
    jvmArgs = ["-Xss64m"]
}

task runBridgePuzzle(type: JavaExec) {
    group = 'application'
    main = 'com.barrybecker4.puzzle.bridge.ui.BridgePuzzle'
    classpath = sourceSets.main.runtimeClasspath
    jvmArgs = ["-Xss64m"]
}


ext.appMap = new LinkedHashMap()
appMap.put('puzzle', [include:['com/barrybecker4/puzzle/common/**']])
appMap.put('adventure',
    [include:['com/barrybecker4/puzzle/adventure/**'],
     exclude:['com/barrybecker4/puzzle/adventure/**/*.pdf']])
appMap.put('hiq', [include:['com/barrybecker4/puzzle/hiq/**']])
appMap.put('slidingpuzzle', [include:['com/barrybecker4/puzzle/slidingpuzzle/**']])
appMap.put('maze', [include:['com/barrybecker4/puzzle/maze/**']])
appMap.put('redpuzzle', [include:['com/barrybecker4/puzzle/redpuzzle/**']])
appMap.put('sudoku', [include:['com/barrybecker4/puzzle/sudoku/**']])
appMap.put('tantrix', [include:['com/barrybecker4/puzzle/tantrix/**']])
appMap.put('bridge', [include:['com/barrybecker4/puzzle/bridge/**']])
appMap.put('twopails', [include:['com/barrybecker4/puzzle/twopails/**']])


apply from: 'https://raw.github.com/barrybecker4/bb4-common/master/bb4-publish.gradle'